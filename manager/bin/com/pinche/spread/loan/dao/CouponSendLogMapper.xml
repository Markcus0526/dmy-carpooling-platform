<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pinche.spread.loan.dao.CouponSendLogMapper" >

    <resultMap
        id="CouponSendLogResult"
        type="CouponSendLog" >

        <id
            column="id"
            property="id" />

        <result
            column="coupon_code"
            property="couponCode" />

        <result
            column="operator"
            property="operatorId" />

        <result
            column="send_type"
            property="sendType" />

        <result
            column="num"
            property="num" />

        <result
            column="sendtime"
            property="sendTime" />

        <result
            column="msg"
            property="msg" />

        <result
            column="remark"
            property="remark" />

        <result
            column="deleted"
            property="deleted" />
    </resultMap>

    <select
        id="search"
        parameterType="hashmap"
        resultMap="CouponSendLogResult" >
		SELECT * FROM coupon_send_log 
		WHERE coupon_code=#{syscouponCode} AND deleted=0 ORDER BY id

        <if test="searchall == 0" >
			LIMIT #{page}, #{rows}
        </if>
    </select>

    <insert
        id="insert"
        keyProperty="id"
        parameterType="CouponSendLog"
        useGeneratedKeys="true" >
		INSERT INTO
		coupon_send_log(coupon_code, operator, send_type, num, sendtime, 
		msg, remark, deleted)
		VALUES(#{couponCode}, #{operatorId}, #{sendType}, #{num}, #{sendTime}, 
		#{msg}, #{remark}, #{deleted})
    </insert>

</mapper>