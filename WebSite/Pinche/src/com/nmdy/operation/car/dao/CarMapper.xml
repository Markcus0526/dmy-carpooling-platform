<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nmdy.operation.car.dao.CarMapper" >

    <resultMap
        id="carresult"
        type="com.nmdy.operation.car.dao.carEntity" >

        <result
            column="brand"
            property="brand" />

        <result
            column="car_style"
            property="car_style" />

        <result
            column="type"
            property="type" />

        <result
            column="color_desc"
            property="color_desc" />

        <result
            column="id"
            property="id" />
    </resultMap>
    <!-- 查询品牌 -->

    <select
        id="findcarbrand"
        parameterType="int"
        resultMap="carresult" >
		select
		brand from car_type where deleted=0 group by brand
    </select>
    <!-- 根据品牌查询车型 -->

    <select
        id="findstylebybrand"
        parameterType="string"
        resultMap="carresult" >
		select car_style from car_type where deleted=0

        <!-- <if test="#{xxx}!= null and '' != brand_xxxx"> </if> -->
		and brand = #{xxx}
    </select>
    <!-- 查询级别 -->

    <select
        id="findtype"
        parameterType="java.util.Map"
        resultMap="carresult" >
	select type from car_type where brand = #{brand} and car_style=#{car_style} and deleted=0
    </select>
    <!-- 查询颜色 -->

    <select
        id="findcolordesc"
        parameterType="int"
        resultMap="carresult" >
		select
		color_desc from color where deleted =0
    </select>
    <!-- 添加颜色 -->

    <insert
        id="addColor"
        parameterType="string" >
		insert into color
		(color_desc) values (#{sss})
    </insert>
    <!-- 添加品牌 -->

    <insert
        id="addBrand"
        parameterType="string" >
		insert into car_type (brand,car_style)
		value (#{xxx},"其他")
    </insert>
    <!-- 添加车型 -->

    <insert
        id="addStyle"
        parameterType="java.util.Map" >
		insert into car_type
		(brand,car_style) values (#{brand},#{car_style})
    </insert>
    <!-- 删除品牌 -->

        <update
        id="deleteBrand"
          parameterType="String" >
		update car_type

        <set>
         
			deleted=1
            
        </set>
		where brand=#{aa}

    </update>
    <!-- 删除颜色 -->
           <update
        id="deleteColor"
          parameterType="String" >
		update color

        <set>
         
			deleted=1
            
        </set>
		 where color_desc = #{aa}

    </update>
    <!-- 删除车型 -->


          <update
        id="deleteStyle"
          parameterType="java.util.Map" >
		update car_type

        <set>
         
			deleted=1
            
        </set>
		where brand =#{brand} and car_style = #{car_style}

    </update>
    <!-- 保存 -->

    <update
        id="updateSave"
        parameterType="java.util.Map" >
		update car_type  

        <set>
			type=#{type}
        </set>
		where brand=#{brand} and car_style=#{car_style}
    </update>
    <!-- 查询有没有用户注册 -->
      <select id="samebrand" resultType="int"  parameterType="java.util.Map" >
     select count(*) from user_car where brand=#{brand} and deleted=0

    </select>
     <select id="samestyle" resultType="int"   parameterType="java.util.Map">
     select count(*) from user_car where brand=#{brand} and style=#{car_style} and deleted=0

    </select>
     <select id="samecolor" resultType="int"  parameterType="java.util.Map">
     select count(*) from user_car where color=#{color} and deleted=0

    </select>
        <!-- 查询有没有已经存在的数据 -->
      <select id="insamebrand" resultType="int"  parameterType="java.util.Map" >
     select count(*) from car_type where brand=#{brand} and deleted=0

    </select>
     <select id="insamestyle" resultType="int"   parameterType="java.util.Map">
     select count(*) from car_type where brand=#{brand} and car_style=#{car_style} and deleted=0

    </select>
     <select id="insamecolor" resultType="int"  parameterType="java.util.Map">
     select count(*) from color where color_desc=#{color} and deleted=0

    </select>
    <!-- 导出表格查询 -->

    <select
        id="outto"
        parameterType="java.util.Map"
        resultMap="carresult" >
     select id,car_style,type,brand from car_type where deleted =0 LIMIT #{start},#{limit} ;
    </select>

    <select
        id="getTotal"
        resultType="int" >
     select count(*) from car_type where deleted =0
    </select>

</mapper>